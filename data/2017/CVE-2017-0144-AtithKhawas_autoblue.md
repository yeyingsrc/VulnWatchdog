## CVE-2017-0144 - EternalBlue

**漏洞编号:** CVE-2017-0144

**漏洞类型:** 远程代码执行

**影响应用:** Windows SMBv1

**危害等级:** 高危，可能导致完全系统控制

**影响版本:** Windows Vista SP2, Windows Server 2008 SP2 and R2 SP1, Windows 7 SP1, Windows 8.1, Windows Server 2012 Gold and R2, Windows RT 8.1, Windows 10 Gold, 1511, 1607, Windows Server 2016

**利用条件:** 目标系统开启SMBv1服务，攻击者与目标系统网络可达

**POC 可用性:** 是

**投毒风险:** 10%

## 详情

CVE-2017-0144（EternalBlue）是Microsoft Windows SMBv1服务器中的一个远程代码执行漏洞。攻击者可以通过构造特制的SMB数据包发送到目标服务器，利用此漏洞在目标系统上执行任意代码，无需身份验证。提供的漏洞利用代码AUTOBLUE是一个自动化工具，旨在简化EternalBlue漏洞的利用过程。它利用Nmap扫描目标系统是否存在MS17-010漏洞，然后使用Metasploit的msfconsole自动启动EternalBlue漏洞利用模块。由于AUTOBLUE需要用户输入目标IP和攻击者IP，并且自动配置Metasploit模块，存在一定风险。例如，攻击者可能将自己的恶意Payload嵌入到Metasploit配置中，从而进行投毒攻击。然而，代码本身主要是自动化已知的利用方式，直接集成了Nmap和Metasploit，相对透明，因此投毒风险比例较低。

**利用方式：**

1.  **扫描：** 使用Nmap扫描目标IP地址，检测是否存在MS17-010漏洞。
2.  **配置：**  配置Metasploit的`exploit/windows/smb/ms17_010_eternalblue`模块，设置RHOSTS（目标IP地址）和LHOST（攻击者IP地址）。
3.  **执行：**  执行EternalBlue漏洞利用模块，通过精心构造的SMB数据包触发漏洞，在目标系统上执行Payload（通常是一个反向Shell或Meterpreter会话）。

由于SMBv1的广泛弃用和MS17-010补丁的发布，此漏洞的利用难度有所增加，但未打补丁的旧系统仍然容易受到攻击。

**项目地址:** [AtithKhawas/autoblue](https://github.com/AtithKhawas/autoblue)

**漏洞详情:** [CVE-2017-0144](https://nvd.nist.gov/vuln/detail/CVE-2017-0144)