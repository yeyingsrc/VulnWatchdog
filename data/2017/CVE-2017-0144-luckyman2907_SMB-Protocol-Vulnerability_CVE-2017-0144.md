## CVE-2017-0144 Windows SMB Remote Code Execution Vulnerability (EternalBlue)

**漏洞编号:** CVE-2017-0144

**漏洞类型:** 远程代码执行

**影响应用:** Windows SMBv1

**危害等级:** 高危，可能导致远程代码执行，系统被完全控制

**影响版本:** Windows Vista SP2, Windows Server 2008 SP2 and R2 SP1, Windows 7 SP1, Windows 8.1, Windows Server 2012 Gold and R2, Windows RT 8.1, and Windows 10 Gold, 1511, and 1607; and Windows Server 2016

**利用条件:** 目标系统开启SMBv1服务，且未安装MS17-010补丁

**POC 可用性:** 是

**投毒风险:** 0%

## 详情

CVE-2017-0144 是一个存在于Windows SMBv1服务器中的远程代码执行漏洞。该漏洞允许远程攻击者通过精心制作的数据包执行任意代码，无需用户交互。攻击利用的是SMBv1协议中的一个缓冲区溢出缺陷。该漏洞曾被EternalBlue 武器化，并被WannaCry勒索病毒利用，造成了巨大的影响。

**有效性:**

提供的POC代码（`README.md` 文件内容）描述了如何利用Metasploit框架中的`exploit/windows/smb/ms17_010_eternalblue`模块来攻击存在漏洞的Windows系统。这是一个有效的漏洞利用方法，因为EternalBlue是公开可用的，并且Metasploit模块提供了易于使用的接口。

**投毒风险:**

该`README.md`文件本身只是一个实验指南，没有包含任何可执行代码，因此不存在投毒风险。作者没有在文档中隐藏任何恶意代码的可能性，投毒风险评估为0%。

**利用方式:**

1.  **环境准备:**搭建攻击机(Kali Linux)和靶机(存在漏洞的Windows系统)，配置IP地址，确保网络互通。
2.  **服务启动:** 在Kali Linux上启动Postgresql服务（`service postgresql start`），用于Metasploit的数据库支持。
3.  **Metasploit启动:** 启动Metasploit控制台（`msfconsole`）。
4.  **漏洞搜索:** 在Metasploit中搜索与`ms17_010`相关的模块（`search ms17_010`）。
5.  **模块选择:** 选择`exploit/windows/smb/ms17_010_eternalblue` 模块(`use 0`)。
6.  **Payload设置:**  设置payload为`windows/x64/meterpreter/reverse_tcp`。这个payload将在目标系统上执行，并建立一个反向TCP连接到攻击者机器。
7.  **参数配置:** 设置`RHOSTS` 为目标Windows系统的IP地址，`LHOST`为攻击机IP地址。
8.  **漏洞利用:** 运行`exploit`命令，Metasploit将尝试利用EternalBlue漏洞。
9.  **获取Shell:** 如果漏洞利用成功，将获得一个Meterpreter shell，可以控制目标系统。

**项目地址:** [luckyman2907/SMB-Protocol-Vulnerability_CVE-2017-0144](https://github.com/luckyman2907/SMB-Protocol-Vulnerability_CVE-2017-0144)

**漏洞详情:** [CVE-2017-0144](https://nvd.nist.gov/vuln/detail/CVE-2017-0144)