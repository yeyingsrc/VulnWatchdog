## CVE-2017-0144 - Windows SMB 远程代码执行漏洞 (EternalBlue)

**漏洞编号:** CVE-2017-0144

**漏洞类型:** 远程代码执行

**影响应用:** Windows SMBv1 Server

**危害等级:** 高危，可能导致系统完全控制

**影响版本:** Windows Vista SP2; Windows Server 2008 SP2 and R2 SP1; Windows 7 SP1; Windows 8.1; Windows Server 2012 Gold and R2; Windows RT 8.1; Windows 10 Gold, 1511, and 1607; Windows Server 2016

**利用条件:** 目标系统开启 SMBv1 服务，且攻击者能够访问目标系统的 445 端口。

**POC 可用性:** 是

**投毒风险:** 10%

## 详情

CVE-2017-0144 是一个存在于 Windows SMBv1 服务器中的远程代码执行漏洞，也被称为 "EternalBlue"。 攻击者可以构造特制的 SMB 数据包发送到目标系统，利用此漏洞在目标系统上执行任意代码。

**漏洞利用有效性：**
提供的漏洞利用代码（README.md）描述了使用 Metasploit 框架进行攻击的步骤。该文档详细说明了如何使用 Nmap 扫描目标系统是否存在漏洞，以及如何配置和运行 Metasploit 模块 `exploit/windows/smb/ms17_010_eternalblue`。 该利用方法基于 Metasploit 框架，是公开可用的并且被广泛使用，因此**有效性较高**。 

**投毒风险：**
虽然该仓库的README.md文件展示了漏洞利用过程，但是并没有直接包含后门代码或恶意payload。代码示例主要依赖 Metasploit 框架，而Metasploit 框架本身是合法的渗透测试工具。因此，直接的投毒代码风险较低。然而，用户在使用任何来源的攻击代码时，都应该谨慎审查，因为攻击者可能通过替换 Metasploit 的默认 Payload 或者添加额外的步骤植入后门。**投毒风险评估为 10%**，主要来自用户对 Metasploit 模块配置不当或下载来源不明的 Metasploit 模块。

**漏洞利用方式：**
1.  **网络扫描：** 使用 Nmap 等工具扫描目标网络，确定目标系统是否开启 SMBv1 服务，以及是否存在 MS17-010 漏洞。
2.  **Metasploit 利用：** 使用 Metasploit 框架中的 `exploit/windows/smb/ms17_010_eternalblue` 模块。
3.  **配置攻击参数：** 设置 `RHOSTS` 为目标 IP 地址，根据需要配置其他选项 (例如 payload 类型)。
4.  **执行攻击：** 运行 `exploit` 命令，Metasploit 将发送恶意 SMB 数据包，尝试利用漏洞。
5.  **获取 Shell：** 如果漏洞利用成功，Metasploit 将在目标系统上打开一个 Meterpreter 会话，攻击者可以通过该会话执行任意命令，完全控制目标系统。

**缓解措施：** 禁用 SMBv1 协议，安装 Microsoft 发布的 MS17-010 安全补丁。

**项目地址:** [EEsshq/CVE-2017-0144---EtneralBlue-MS17-010-Remote-Code-Execution](https://github.com/EEsshq/CVE-2017-0144---EtneralBlue-MS17-010-Remote-Code-Execution)

**漏洞详情:** [CVE-2017-0144](https://nvd.nist.gov/vuln/detail/CVE-2017-0144)