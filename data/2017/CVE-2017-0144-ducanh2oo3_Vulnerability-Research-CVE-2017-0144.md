## CVE-2017-0144 - Windows SMB 远程代码执行漏洞 (EternalBlue)

**漏洞编号:** CVE-2017-0144

**漏洞类型:** 远程代码执行

**影响应用:** Windows SMBv1

**危害等级:** 高危，可能导致完全控制受影响的系统

**影响版本:** Windows Vista SP2, Windows Server 2008 SP2 and R2 SP1, Windows 7 SP1, Windows 8.1, Windows Server 2012 Gold and R2, Windows RT 8.1, Windows 10 Gold, 1511, and 1607; Windows Server 2016

**利用条件:** 目标系统启用 SMBv1 且未安装 MS17-010 安全更新

**POC 可用性:** 是

**投毒风险:** 5%

## 详情

CVE-2017-0144 存在于 Windows SMBv1 服务器中，允许远程攻击者通过特制的报文执行任意代码。该漏洞被称为 EternalBlue，利用该漏洞无需用户交互即可实现远程代码执行，攻击者可以完全控制受影响的系统。 

**有效性：**
提供的漏洞利用代码（README.md 文件）描述了如何使用 Metasploit 框架中的 EternalBlue 漏洞利用模块攻击存在漏洞的 Windows 系统。该文档描述了利用过程：首先在 Kali Linux 上启动 Metasploit 控制台，然后搜索并使用 ms17_010 漏洞利用模块，设置目标 IP 地址和 payload，最后执行 exploit 以获取 Meterpreter shell。由于该漏洞利用方法基于 Metasploit 框架，且 EternalBlue 漏洞已被广泛研究和利用，因此可以判定该漏洞利用方法是有效的。

**投毒风险：**
提供的代码片段主要是一个 README.md 文件，其中包含漏洞利用的步骤说明和一些截图。该文件本身不包含任何恶意代码。但是，攻击者可能在以下方面引入投毒风险：
1.  **依赖的 Metasploit 模块：** 攻击者可能修改 Metasploit 模块，使其执行恶意操作，例如安装后门或窃取凭据。但从提供的文件来看，并没有直接修改模块。
2.  **Payload：** 攻击者可以使用恶意 payload，例如 ransomware 或键盘记录器。从提供的文件来看，payload是可以配置的，因此存在一定风险。
3.  **钓鱼：** 攻击者可能使用假的 EternalBlue 漏洞利用程序来诱骗用户运行恶意代码。但此文件仅是演示，用户需要自行配置。
综上所述，虽然 README.md 文件本身没有恶意代码，但利用过程中可能存在投毒风险。为了量化风险，我给出一个较低的概率，估计为 5%。

**利用方式：**
利用 CVE-2017-0144 的主要方式如下：
1.  **漏洞发现：** 攻击者扫描网络以查找易受攻击的 Windows 系统，这些系统启用了 SMBv1 且未安装 MS17-010 安全更新。
2.  **漏洞利用：** 攻击者使用 EternalBlue 漏洞利用程序（例如 Metasploit 模块）向目标系统发送特制的 SMB 报文。
3.  **代码执行：** 成功利用漏洞后，攻击者可以在目标系统上执行任意代码，通常是通过部署 payload（例如 Meterpreter shell）。
4.  **权限提升和横向移动：** 攻击者使用 Meterpreter shell 或其他工具来提升权限并在网络中横向移动，以访问更多系统和数据。

**项目地址:** [ducanh2oo3/Vulnerability-Research-CVE-2017-0144](https://github.com/ducanh2oo3/Vulnerability-Research-CVE-2017-0144)

**漏洞详情:** [CVE-2017-0144](https://nvd.nist.gov/vuln/detail/CVE-2017-0144)