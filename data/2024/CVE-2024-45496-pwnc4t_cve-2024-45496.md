## CVE-2024-45496-OpenShift节点权限提升

**漏洞编号:** CVE-2024-45496

**漏洞类型:** 权限提升

**影响应用:** OpenShift Container Platform

**危害等级:** 高危，可能导致节点完全控制

**影响版本:** 4.12.0 <= 版本 <= 4.18.0

**利用条件:** 需要具有开发人员权限的OpenShift账户

**POC 可用性:** 是

**投毒风险:** 10%

## 详情

CVE-2024-45496 存在于 OpenShift Container Platform 的构建过程中。攻击者利用该漏洞，可以通过构造恶意的 .gitconfig 文件，在 git clone 过程中执行任意命令，从而提升在构建节点上的权限。 

**有效性：**
提供的 Dockerfile 配合漏洞描述有效，因为攻击者可以利用`git clone`操作中的`.gitconfig`文件执行恶意代码。Dockerfile 可以用于构建包含恶意 `.gitconfig` 文件的镜像，当该镜像在 OpenShift 中用于构建任务时，将触发漏洞，导致节点权限提升。

**投毒风险：**
仅从 Dockerfile 来看，投毒风险较低。但是仍然存在10%的风险。攻击者可能通过以下方式进行投毒：
1.  **构建过程中注入恶意代码：** 攻击者可能在 Dockerfile 中添加额外的指令，例如在构建过程中下载并执行恶意脚本。
2.  **利用基础镜像漏洞：** 如果 Dockerfile 基于存在已知漏洞的基础镜像，攻击者可能利用这些漏洞进行攻击。

需要进一步检查构建镜像的源代码和依赖项，才能更准确评估投毒风险。

**利用方式：**
1.  **创建包含恶意 .gitconfig 文件的 Git 仓库：** 攻击者创建一个包含 `.gitconfig` 文件的 Git 仓库，该文件包含在 git clone 过程中执行任意命令的配置。
2.  **创建 OpenShift 构建配置：** 攻击者创建一个 OpenShift 构建配置，该配置指定使用包含恶意 .gitconfig 文件的 Git 仓库作为构建源。
3.  **触发构建：** 攻击者触发 OpenShift 构建。在构建过程中，git clone 命令会读取恶意 .gitconfig 文件，并执行其中的命令，从而导致节点权限提升。
4.  **权限提升：** 成功利用该漏洞后，攻击者可以在构建节点上执行任意命令，例如安装后门、窃取敏感数据等。

**项目地址:** [pwnc4t/cve-2024-45496](https://github.com/pwnc4t/cve-2024-45496)

**漏洞详情:** [CVE-2024-45496](https://nvd.nist.gov/vuln/detail/CVE-2024-45496)