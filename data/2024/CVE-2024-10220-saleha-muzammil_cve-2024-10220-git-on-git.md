## CVE-2024-10220-Kubernetes-kubelet-gitRepo命令执行

**漏洞编号:** CVE-2024-10220

**漏洞类型:** 命令执行

**影响应用:** Kubernetes kubelet

**危害等级:** 高危，可导致节点被控制

**影响版本:** <=1.28.11, 1.29.0-1.29.6, 1.30.0-1.30.2

**利用条件:** 攻击者需要能够创建包含恶意gitRepo卷的Pod。

**POC 可用性:** 是

**投毒风险:** 0%

## 详情

该漏洞允许通过精心设计的gitRepo卷在Kubernetes kubelet组件上执行任意命令。POC代码展示了一个恶意的git仓库，其`hooks/post-checkout`脚本包含`id > /tmp/poc`，这意味着每次检出代码时，都会将执行命令的用户ID写入`/tmp/poc`文件。当kubelet尝试从这个恶意git仓库拉取代码时，`post-checkout`钩子会被执行，从而实现任意命令执行。根据漏洞库信息，攻击者只需要拥有创建Pod的权限，且Pod的spec包含恶意的gitRepo 卷即可触发漏洞。由于提供的POC仅仅验证了命令执行，并没有发现其它恶意代码，因此投毒风险较低。

**项目地址:** [saleha-muzammil/cve-2024-10220-git-on-git](https://github.com/saleha-muzammil/cve-2024-10220-git-on-git)

**漏洞详情:** [CVE-2024-10220](https://nvd.nist.gov/vuln/detail/CVE-2024-10220)